<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Impulse Overdrive</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
:root{
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0;}

body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:18px;
  background: radial-gradient(circle at top, #0f172a 0%, #020617 55%, #000 100%);
  color:#000;
}

.frame{
  width:100%;
  max-width:760px;
  border-radius:26px;
  padding:16px;
  background: linear-gradient(180deg, #334155 0%, #0b1220 100%);
  box-shadow:0 24px 55px rgba(0,0,0,0.65);
  border:2px solid rgba(255,255,255,0.05);
}

.card{
  border-radius:22px;
  padding:18px 18px 16px;
  background: linear-gradient(180deg, #2b3a52 0%, #1b2537 100%);
  border:1px solid rgba(255,255,255,0.06);
  box-shadow: inset 0 0 0 2px rgba(0,0,0,0.25);
}

.header{
  display:flex;
  justify-content:space-between;
  gap:18px;
  align-items:flex-start;
  margin-bottom:16px;
}

.brand{
  display:flex;
  gap:14px;
  align-items:flex-start;
}

.brand img{
  width:78px;
  height:78px;
  object-fit:contain;
  filter:drop-shadow(0 10px 18px rgba(0,0,0,0.55));
}

h1{
  font-size:1.55rem;
  font-weight:900;
  letter-spacing:0.14em;
  text-transform:uppercase;
  color:#000;
  white-space:nowrap;
}

.subtitle{
  margin-top:6px;
  font-size:0.9rem;
  color:#000;
  opacity:0.85;
}

/* NAVIGATION BUTTONS */
.nav{
  margin-top:10px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.nav a{
  text-decoration:none;
  padding:6px 14px;
  border-radius:999px;
  font-size:0.8rem;
  font-weight:800;
  letter-spacing:0.05em;
  background:#1e293b;
  color:#cbd5e1;
  border:1px solid rgba(255,255,255,0.15);
  transition:0.15s ease;
}

.nav a:hover{
  background:#334155;
}

.nav a.active{
  background:#3b82f6;
  color:#0b1220;
  border-color:#60a5fa;
}

.meta{
  text-align:right;
  font-size:0.95rem;
  color:#000;
  opacity:0.85;
  line-height:1.55;
  white-space:nowrap;
}

.tableFrame{
  border-radius:18px;
  overflow:hidden;
  background:#0b1220;
  border:2px solid rgba(0,0,0,0.55);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.06),
    0 14px 28px rgba(0,0,0,0.45);
}

table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  table-layout:fixed;
}

thead th{
  background:#1f2a3a;
  color:#000;
  text-transform:uppercase;
  letter-spacing:0.14em;
  font-size:0.75rem;
  font-weight:900;
  padding:12px 10px;
  border-bottom:1px solid rgba(0,0,0,0.6);
}

th, td{
  text-align:center;
  color:#000;
  font-size:0.92rem;
  padding:12px 10px;
  border-right:1px solid rgba(0,0,0,0.35);
}
th:last-child, td:last-child{border-right:none;}
tbody td{border-bottom:1px solid rgba(0,0,0,0.25);}
tbody tr:last-child td{border-bottom:none;}

.c-pos{width:64px;}
.c-team{width:34%;text-align:left;font-weight:900;padding-left:14px;}
.c-stat{width:calc((66% - 64px)/7);}

/* ===== Mobile Stability Patch ===== */

/* Safe area support for modern phones */
body{
  padding-left: calc(18px + env(safe-area-inset-left));
  padding-right: calc(18px + env(safe-area-inset-right));
  padding-top: calc(18px + env(safe-area-inset-top));
  padding-bottom: calc(18px + env(safe-area-inset-bottom));
}

/* Allow horizontal scroll instead of squashing table */
.tableFrame{
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
}

table{
  min-width:720px;
}

@media (max-width:560px){
  .header{
    flex-direction:column;
    align-items:flex-start;
    gap:12px;
  }

  .meta{
    text-align:left;
    white-space:normal;
    width:100%;
  }

  .brand img{
    width:64px;
    height:64px;
  }

  h1{
    white-space:normal;
    font-size:1.25rem;
  }
}
</style>
</head>

<body>
<main class="frame">
<section class="card">

<div class="header">
  <div class="brand">
    <img src="logo.png" alt="Impulse Logo">
    <div>
      <h1>Impulse Overdrive</h1>
      <div class="subtitle">Live standings will be updated ASAP by GameFlame</div>

      <div class="nav">
        <a class="active" href="index.html">Overdrive</a>
        <a href="contenders.html">Contenders</a>
      </div>
    </div>
  </div>

  <div class="meta">
    Season: <strong>1</strong><br>
    Last updated: <strong id="last-updated">â€”</strong>
  </div>
</div>

<div class="tableFrame">
<table>
<thead>
<tr>
<th class="c-pos">#</th>
<th class="c-team">TEAM</th>
<th class="c-stat">P</th>
<th class="c-stat">W</th>
<th class="c-stat">L</th>
<th class="c-stat">MF</th>
<th class="c-stat">MA</th>
<th class="c-stat">MD</th>
<th class="c-stat">PTS</th>
</tr>
</thead>
<tbody id="league-body"></tbody>
</table>
</div>

</section>
</main>

<script>
const SHEET_CSV_URL="https://docs.google.com/spreadsheets/d/1ilDa0ZleooN3OBruvtOqF9Ym1CitowFjaLCk1GiYiNc/export?format=csv&gid=829195735";

function parseCsv(txt){
const rows=txt.trim().replace(/\r/g,"").split("\n").map(r=>r.split(","));
const[, ...data]=rows;
return data.filter(r=>r[1]).map(r=>({
pos:r[0],team:r[1],played:r[2],wins:r[3],losses:r[4],
mf:r[5],ma:r[6],md:r[7],pts:r[8],colour:r[9]
}));
}

function renderTable(teams){
const tbody=document.getElementById("league-body");
tbody.innerHTML="";
teams.forEach((t,i)=>{
const tr=document.createElement("tr");
tr.innerHTML=`
<td>${t.pos||i+1}</td>
<td class="c-team">${t.team}</td>
<td>${t.played}</td>
<td>${t.wins}</td>
<td>${t.losses}</td>
<td>${t.mf}</td>
<td>${t.ma}</td>
<td>${t.md}</td>
<td><strong>${t.pts}</strong></td>`;
if(t.colour){
[...tr.children].forEach(td=>td.style.backgroundColor=t.colour);
}
tbody.appendChild(tr);
});
}

async function load(){
const res=await fetch(SHEET_CSV_URL+"&_ts="+Date.now(),{cache:"no-store"});
const text=await res.text();
renderTable(parseCsv(text));
document.getElementById("last-updated").textContent=new Date().toLocaleString();
}

load();
</script>

</body>
</html>
